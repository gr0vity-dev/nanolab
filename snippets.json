{   
    "setup_ledger_and_config": {
        "mandatory_vars": [
            "LEDGER",
            "SETUP_NODES",
            "NL_CONFIG",
            "NODES_CONFIG",
            "REMOTE_IP"
        ],
        "commands": [
            {
                "type": "bash",
                "command": "./nl_run.py down "
            },
            {
                "type": "bash",
                "variables" : ["NL_CONFIG"],
                "command": "cp ./speedsuite/testcases/nanolocal/saved_configs/$NL_CONFIG ./nanolocal/nl_config.toml"
            },
            {
                "type": "bash",
                "command": "./nl_run.py conf_edit --nested_path remote_address --value $REMOTE_IP"
            },
            {
                "type": "bash",
                "command": "./nl_run.py conf_edit --nested_path representatives.docker_tag --value $DOCKER_TAG"
            },
            {
                "type": "bash",
                "command": "./nl_run.py conf_edit --nested_path representatives.config_node_path --value $NODES_CONFIG"
            },
            {
                "type": "bash",
                "command": "./nl_run.py conf_edit --nested_path representatives.nodes.*.config_node_path --value $NODES_CONFIG"
            },
            {
                "type": "bash",
                "command": "./nl_run.py create && ./nl_run.py reset"
            },
            {
                "type": "bash",
                "command": "for i in $SETUP_NODES; do cp ./speedsuite/testcases/nanolocal/saved_ledgers/$LEDGER ./nanolocal/nano_nodes/${i}/NanoTest/data.ldb; done"
            }
        ]
    }
}